// ==UserScript==
// @name         RuManyogana
// @namespace    http://tampermonkey.net/
// @author       https://github.com/dobrosketchkun
// @version      1.0
// @description  RuManyogana is an art-project user script
// @match        http://*/*
// @match        https://*/*
// @grant        none
// @license      The Uncertain Commons License https://gist.github.com/dobrosketchkun/d0c6aba085fb4a910926616a8b83c4c5
// ==/UserScript==

(function() {
    'use strict';

    var correspondences = {
        'А': ['亜', '哀', '挨', '愛', '曖', '悪', '握', '圧', '扱', '安'],
        'а': ['亜', '哀', '挨', '愛', '曖', '悪', '握', '圧', '扱', '安'],
        'Б': ['馬', '婆', '罵', '売', '倍', '梅', '培', '陪', '媒', '買'],
        'б': ['馬', '婆', '罵', '売', '倍', '梅', '培', '陪', '媒', '買'],
        'В': ['和', '話', '賄', '脇', '惑', '枠', '湾', '腕', '椀', '萬'],
        'в': ['和', '話', '賄', '脇', '惑', '枠', '湾', '腕', '椀', '萬'],
        'Г': ['牙', '瓦', '我', '画', '芽', '賀', '雅', '餓', '外', '劾'],
        'г': ['牙', '瓦', '我', '画', '芽', '賀', '雅', '餓', '外', '劾'],
        'Д': ['大', '代', '台', '第', '題', '諾', '濁', '脱', '奪', '誰'],
        'д': ['大', '代', '台', '第', '題', '諾', '濁', '脱', '奪', '誰'],
        'Е': ['永', '泳', '英', '映', '栄', '営', '詠', '影', '鋭', '衛'],
        'е': ['永', '泳', '英', '映', '栄', '営', '詠', '影', '鋭', '衛'],
        'Ё': ['予', '余', '誉', '預', '幼', '用', '羊', '妖', '洋', '要'],
        'ё': ['予', '余', '誉', '預', '幼', '用', '羊', '妖', '洋', '要'],
        'Ж': ['示', '字', '寺', '次', '耳', '自', '似', '児', '事', '侍'],
        'ж': ['示', '字', '寺', '次', '耳', '自', '似', '児', '事', '侍'],
        'З': ['座', '挫', '在', '材', '剤', '財', '罪', '雑', '残', '斬'],
        'з': ['座', '挫', '在', '材', '剤', '財', '罪', '雑', '残', '斬'],
        'И': ['以', '衣', '位', '囲', '医', '依', '委', '威', '為', '胃'],
        'и': ['以', '衣', '位', '囲', '医', '依', '委', '威', '為', '胃'],
        'Й': ['尉', '異', '移', '萎', '偉', '椅', '彙', '意', '違', '維'],
        'й': ['尉', '異', '移', '萎', '偉', '椅', '彙', '意', '違', '維'],
        'К': ['下', '化', '火', '加', '加', '仮', '何', '花', '佳', '価'],
        'к': ['下', '化', '火', '加', '加', '仮', '何', '花', '佳', '価'],
        'Л': ['乱', '卵', '覧', '濫', '藍', '欄', '吏', '利', '里', '理'],
        'л': ['乱', '卵', '覧', '濫', '藍', '欄', '吏', '利', '里', '理'],
        'М': ['麻', '摩', '磨', '魔', '毎', '妹', '枚', '昧', '埋', '幕'],
        'м': ['麻', '摩', '磨', '魔', '毎', '妹', '枚', '昧', '埋', '幕'],
        'Н': ['那', '奈', '内', '梨', '謎', '鍋', '南', '軟', '難', '二'],
        'н': ['那', '奈', '内', '梨', '謎', '鍋', '南', '軟', '難', '二'],
        'О': ['汚', '王', '凹', '央', '応', '往', '押', '旺', '欧', '殴'],
        'о': ['汚', '王', '凹', '央', '応', '往', '押', '旺', '欧', '殴'],
        'П': ['賠', '漠', '縛', '爆', '抜', '罰', '閥', '晩', '番', '蛮'],
        'п': ['賠', '漠', '縛', '爆', '抜', '罰', '閥', '晩', '番', '蛮'],
        'Р': ['拉', '裸', '羅', '来', '雷', '頼', '絡', '落', '酪', '辣'],
        'р': ['拉', '裸', '羅', '来', '雷', '頼', '絡', '落', '酪', '辣'],
        'С': ['左', '佐', '沙', '査', '砂', '唆', '差', '詐', '鎖', '才'],
        'с': ['左', '佐', '沙', '査', '砂', '唆', '差', '詐', '鎖', '才'],
        'Т': ['他', '多', '汰', '打', '妥', '唾', '堕', '惰', '駄', '太'],
        'т': ['他', '多', '汰', '打', '妥', '唾', '堕', '惰', '駄', '太'],
        'У': ['右', '宇', '羽', '雨', '唄', '畝', '浦', '運', '雲', '鬱'],
        'у': ['右', '宇', '羽', '雨', '唄', '畝', '浦', '運', '雲', '鬱'],
        'Ф': ['不', '夫', '父', '付', '布', '扶', '府', '怖', '阜', '附'],
        'ф': ['不', '夫', '父', '付', '布', '扶', '府', '怖', '阜', '附'],
        'Х': ['把', '波', '派', '破', '覇', '拝', '杯', '背', '肺', '俳'],
        'х': ['把', '波', '派', '破', '覇', '拝', '杯', '背', '肺', '俳'],
        'Ц': ['追', '椎', '墜', '通', '痛', '塚', '漬', '坪', '爪', '鶴'],
        'ц': ['追', '椎', '墜', '通', '痛', '塚', '漬', '坪', '爪', '鶴'],
        'Ч': ['地', '知', '値', '恥', '致', '遅', '痴', '稚', '置', '緻'],
        'ч': ['地', '知', '値', '恥', '致', '遅', '痴', '稚', '置', '緻'],
        'Ш': ['士', '子', '支', '止', '氏', '仕', '史', '司', '四', '市'],
        'ш': ['士', '子', '支', '止', '氏', '仕', '史', '司', '四', '市'],
        'Щ': ['矢', '旨', '死', '糸', '至', '伺', '志', '私', '使', '刺'],
        'щ': ['矢', '旨', '死', '糸', '至', '伺', '志', '私', '使', '刺'],
        'Ъ': ['硬'],
        'ъ': ['硬'],
        'Ы': ['伊'],
        'ы': ['伊'],
        'Ь': ['柔'],
        'ь': ['柔'],
        'Э': ['疫', '益', '液', '駅', '悦', '越', '謁', '閲', '円', '延'],
        'э': ['疫', '益', '液', '駅', '悦', '越', '謁', '閲', '円', '延'],
        'Ю': ['由', '油', '喩', '愉', '諭', '輸', '癒', '唯', '友', '有'],
        'ю': ['由', '油', '喩', '愉', '諭', '輸', '癒', '唯', '友', '有'],
        'Я': ['冶', '夜', '野', '弥', '厄', '役', '約', '訳', '薬', '躍'],
        'я': ['冶', '夜', '野', '弥', '厄', '役', '約', '訳', '薬', '躍']
    };

    function getRandomKanji(letter) {
        var kanjis = correspondences[letter];
        if (kanjis && kanjis.length > 1) {
            var randomIndex = Math.floor(Math.random() * kanjis.length);
            return kanjis[randomIndex];
        } else if (kanjis && kanjis.length === 1) {
            return kanjis[0];
        } else {
            return letter;
        }
    }

    function replaceText() {
        var elements = document.querySelectorAll('*:not(script):not(style)');

        elements.forEach(function(element) {
            var node = element.firstChild;

            while (node) {
                if (node.nodeType === Node.TEXT_NODE) {
                    node.nodeValue = node.nodeValue.replace(/./g, function(char) {
                        return getRandomKanji(char);
                    });
                }
                node = node.nextSibling;
            }
        });
    }

    replaceText();
})();